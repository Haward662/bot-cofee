# Telegram бот "Получи кофе бесплатно"

Чат-бот для акции «Получи кофе бесплатно» от брендов Cafa France, Chef Ferguson, NORGE, DRIVER, Takeshi.

## Описание

Бот позволяет пользователям:
- Получить бесплатный кофе при покупке товаров участвующих брендов на сумму от 2000 руб.
- Просмотреть список товаров, участвующих в акции
- Оставить email для получения информации о новых акциях

## Функционал

1. **Приветственный экран** с двумя кнопками:
   - "Получить кофе бесплатно"
   - "Посмотреть, за покупку каких товаров дают кофе бесплатно"

2. **Просмотр товаров** - список категорий товаров участвующих брендов

3. **Выдача кофе** - после подтверждения покупки на сумму от 2000 руб.

4. **Сбор email** - опциональный сбор email адресов для рассылки

5. **Статистика** - команда `/stats` для просмотра статистики бота

## Установка

1. Установите зависимости:
```bash
pip install -r requirements.txt
```

2. Запустите бота:
```bash
python bot.py
```

## База данных

Бот использует SQLite базу данных `bot_database.db` для хранения:
- Информации о пользователях
- Email адресов
- Статистики выданных кофе

## Команды

- `/start` - начать работу с ботом
- `/stats` - просмотреть статистику (количество пользователей и выданных кофе)
- `/export` - экспортировать данные в Excel файл (для администратора)

## Сохранение данных

Бот автоматически сохраняет данные в:
- **База данных SQLite** (`bot_database.db`) - для быстрого доступа
- **Excel файл** (`bot_data.xlsx`) - для удобного анализа

Excel файл содержит два листа:
- **Пользователи** - информация о всех пользователях
- **Выданные кофе** - история выдачи кофе

### ⚠️ Важно для хостинга:

На хостинге (AWS, Amvera) Excel файл создается на сервере. Для доступа к нему:
1. Используйте команду `/export` в Telegram (отправит файл в чат)
2. Или настройте доступ к файлам сервера через FTP/SSH
3. Или используйте облачное хранилище (см. `HOSTING_INFO.md`)

Подробнее см. файл `HOSTING_INFO.md`

## Структура проекта

```
bot cofee/
├── bot.py              # Основной файл бота
├── requirements.txt    # Зависимости
├── README.md          # Документация
└── bot_database.db    # База данных (создается автоматически)
```

## Технические детали

- Использует библиотеку `python-telegram-bot` версии 20.0
- База данных SQLite для хранения данных
- Excel файлы для экспорта данных (openpyxl)
- ConversationHandler для обработки диалога сбора email


